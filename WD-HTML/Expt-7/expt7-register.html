<!DOCTYPE html>
<html>
<head>
    <title>Registration Form Validation</title> <!-- Title displayed in browser tab -->
    <style> /* Start of CSS styling */
		body { /* Styles for body element */
			background-image: url("./bg.jpg"); /* Set background image */
			background-repeat: no-repeat; /* Prevent background image repetition */
			background-size: cover; /* Cover entire viewport with background */
			background-position: center; /* Center the background image */
            background-attachment: fixed; /* Fix background in place when scrolling */
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
        }
        .container { /* Styles for main container */
            font-family: Arial, sans-serif; /* Set font family */
            max-width: 600px; /* Set maximum width */
            margin: 40px auto; /* Center container with top/bottom margin */
            background-color: #fff; /* Set white background */
            padding: 20px 30px; /* Add padding inside container */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Add shadow effect */
            border-radius: 20px; /* Round the corners */
        }
        h2 { /* Styles for h2 heading */
            margin-bottom: 10px; /* Add bottom margin */
        }
        label { /* Styles for label elements */
            display: block; /* Display as block element */
            margin-top: 15px; /* Add top margin */
            margin-bottom: 5px; /* Add bottom margin */
            font-weight: bold; /* Set bold font weight */
        }
        input[type="text"],
        input[type="password"],
        input[type="email"],
        input[type="date"],
        input[type="tel"],
        input[type="file"],
        select,
        textarea { /* Styles for all input types, select, and textarea */
            width: 100%; /* Set width to full container width */
            padding: 8px; /* Add padding inside input */
            margin-bottom: 4px; /* Add bottom margin */
            border-radius: 4px; /* Round the corners */
            border: 1px solid #ccc; /* Add light gray border */
            box-sizing: border-box; /* Include padding and border in total width */
        }
        input[type="radio"],
        input[type="checkbox"] { /* Styles for radio and checkbox inputs */
            margin-right: 8px; /* Add right margin */
        }
        .signup-option { /* Styles for signup option section */
            text-align: center; /* Center align text */
            font-size: 0.9em; /* Set font size */
        }
        .signup-option a { /* Styles for links in signup option */
            color: #383838; /* Set dark gray color */
            text-decoration: underline; /* Add underline */
        }
        .signup-option a:hover { /* Styles for links on hover */
            text-decoration: none; /* Remove underline on hover */
        }
        .btn { /* Styles for button container */
            height: 35px; /* Set fixed height */
        }
        input[type="submit"] { /* Styles for submit button */
            margin-top: 5px; /* Add top margin */
            float: right; /* Float to right */
            padding: 10px 25px; /* Add padding inside button */
            border: none; /* Remove default border */
            border-radius: 8px; /* Round the corners */
            cursor: pointer; /* Show pointer cursor */
            background-color: #000; /* Set black background */
            color: white; /* Set white text color */
            font-size: 1em; /* Set font size */
        }
        input[type="submit"]:hover { /* Styles for submit button on hover */
            opacity: 0.8; /* Reduce opacity on hover */
        }
        .error-message { /* Styles for error messages */
            color: #dc3545; /* Set red color */
            font-size: 0.85rem; /* Set smaller font size */
            margin-top: -4px; /* Add negative top margin */
            margin-bottom: 8px; /* Add bottom margin */
            display: none; /* Initially Set none, therefore not displayed */
        }
        .error-message.show { /* Show is add to class to display the message via JS*/
            display: block; /* Display set to block */
        }
        input.error,
        select.error,
        textarea.error {/* Set input, select options and textarea box border to red (#dc3545) */
            border-color: #dc3545; /* Set red border color */
        }
        .success-message { /* Styles for success messages */
            color: #28a745; /* Set green color */
            font-size: 0.85rem; /* Set smaller font size */
            margin-top: -4px; /* Add negative top margin */
            margin-bottom: 8px; /* Add bottom margin */
            display: none; /* Hide by default */
        }
        .success-message.show { /* Styles for success message when shown */
            display: block; /* Display as block when 'show' class is added */
        }
    </style>
</head> <!-- End of head section -->
<body> <!-- Start of body section -->
<div class="container"> <!-- Main container -->
    <h2 style="text-align:center">Register Your Account</h2> <!-- Heading with inline style -->
    <div class="signup-option"> <!-- Signup option section -->
        Already have an account? <a href="./expt7-login.html">Login</a> <!-- Login link -->
    </div> <!-- End signup option section -->
    <form id="registrationForm"> <!-- Registration form -->
        <label>Name</label> <!-- Name label -->
        <input type="text" id="fname" placeholder="Enter your Name" autofocus autocomplete="name"> <!-- Name input field -->
        <span class="error-message" id="fnameError"></span> <!-- Name error message span -->
        
        <label>Username</label> <!-- Username label -->
        <input type="text" id="username" name="username" placeholder="Choose your username"> <!-- Username input field -->
        <span class="error-message" id="usernameError"></span> <!-- Username error message span -->
        
        <label>Email</label> <!-- Email label -->
        <input type="email" id="email" name="email" size="16" placeholder="Enter your Email"> <!-- Email input field -->
        <span class="error-message" id="emailError"></span> <!-- Email error message span -->
        
        <label>Password</label> <!-- Password label -->
        <input type="password" id="password" name="password" maxlength="16" placeholder="Enter Password"> <!-- Password input field -->
        <span class="error-message" id="passwordError"></span> <!-- Password error message span -->
        
        <label>Confirm Password</label> <!-- Confirm password label -->
        <input type="password" id="confirmPassword" name="confirmPassword" maxlength="16" placeholder="Enter Password Again"> <!-- Confirm password input field -->
        <span class="error-message" id="confirmPasswordError"></span> <!-- Confirm password error message span -->
        
        <label>Phone Number</label> <!-- Phone number label -->
        <input type="tel" id="phone" placeholder="Enter Phone number"> <!-- Phone input field -->
        <span class="error-message" id="phoneError"></span> <!-- Phone error message span -->
        
        <label>Select your Branch</label> <!-- Branch label -->
        <div> <!-- Branch radio buttons container -->
            <input type="radio" id="ece" name="branch" value="Electronics" style="accent-color:black">Electronics & Computer Engg<br> <!-- ECE radio button -->
            <input type="radio" id="mech" name="branch" value="Mechanical" style="accent-color:black">Mechanical & Automation Engg<br> <!-- Mechanical radio button -->
            <input type="radio" id="comp" name="branch" value="Computer" style="accent-color:black">Computer Engg <!-- Computer radio button -->
        </div> <!-- End branch container -->
        <span class="error-message" id="branchError"></span> <!-- Branch error message span -->
        
        <label>Languages Known</label> <!-- Languages label -->
        <div> <!-- Languages checkboxes container -->
            <input type="checkbox" id="e" name="eng" value="english" style="accent-color:black">English<br> <!-- English checkbox -->
            <input type="checkbox" id="m" name="mar" value="marathi" style="accent-color:black">Marathi<br> <!-- Marathi checkbox -->
            <input type="checkbox" id="k" name="kon" value="konkani" style="accent-color:black">Konkani <!-- Konkani checkbox -->
        </div> <!-- End languages container -->
        <span class="error-message" id="languageError"></span> <!-- Languages error message span -->
        
        <label>Choose your Taluka</label> <!-- Taluka label -->
        <select size="1" id="taluka" name="taluka"> <!-- Taluka dropdown select -->
            <option value="">Select a Taluka</option> <!-- Default placeholder option -->
            <option value="Bardez">Bardez</option> <!-- Bardez option -->
            <option value="Bicholim">Bicholim</option> <!-- Bicholim option -->
            <option value="Canacona">Canacona</option> <!-- Canacona option -->
            <option value="Dharbandora">Dharbandora</option> <!-- Dharbandora option -->
            <option value="Mormugao">Mormugao</option> <!-- Mormugao option -->
            <option value="Pernem">Pernem</option> <!-- Pernem option -->
            <option value="Ponda">Ponda</option> <!-- Ponda option -->
            <option value="Quepem">Quepem</option> <!-- Quepem option -->
            <option value="Salcete">Salcete</option> <!-- Salcete option -->
            <option value="Sanguem">Sanguem</option> <!-- Sanguem option -->
            <option value="Sattari">Sattari</option> <!-- Sattari option -->
            <option value="Tiswadi">Tiswadi</option> <!-- Tiswadi option -->
        </select> <!-- End taluka select -->
        <span class="error-message" id="talukaError"></span> <!-- Taluka error message span -->
        
        <label>Enter your Date of Birth</label> <!-- DOB label -->
        <input type="date" id="dob" name="DateOfBirth"> <!-- Date input field -->
        <span class="error-message" id="dobError"></span> <!-- DOB error message span -->
        
        <label for="myfile">Add a Profile Pic</label> <!-- Profile picture label -->
        <input type="file" id="photo" name="photo" accept="image/*"> <!-- File input for profile picture -->
        <span class="error-message" id="photoError"></span> <!-- Photo error message span -->
        
        <label>Select Webpage Theme Color</label> <!-- Theme color label -->
        <input type="color" id="themeColor" name="themeColor"> <!-- Color picker input -->
        
        <h3>What are your hobbies?</h3> <!-- Hobbies heading -->
        <textarea rows="5" id="hobbies" placeholder="Enter your hobbies"></textarea> <!-- Hobbies textarea -->
        <span class="error-message" id="hobbiesError"></span> <!-- Hobbies error message span -->
        
        <div class="btn"> <!-- Button container -->
            <input type="submit" id="favcolor" name="favcolor" value="Register"> <!-- Submit button -->
        </div> <!-- End button container -->
    </form> <!-- End registration form -->
</div> <!-- End container -->

<script> // Start of JavaScript code
// Get form and input elements by id
const registrationForm = document.getElementById('registrationForm'); // Get registration form element by ID
const fnameInput = document.getElementById('fname'); // Get name input element by ID
const usernameInput = document.getElementById('username'); // Get username input element by ID
const emailInput = document.getElementById('email'); // Get email input element by ID
const passwordInput = document.getElementById('password'); // Get password input element by ID
const confirmPasswordInput = document.getElementById('confirmPassword'); // Get confirm password input element by ID
const phoneInput = document.getElementById('phone'); // Get phone input element by ID
const talukaSelect = document.getElementById('taluka'); // Get taluka select element by ID
const dobInput = document.getElementById('dob'); // Get date of birth input element by ID
const photoInput = document.getElementById('photo'); // Get photo input element by ID
const hobbiesInput = document.getElementById('hobbies'); // Get hobbies textarea element by ID

// Get error message elements by id
const fnameError = document.getElementById('fnameError'); // Get name error span element by ID
const usernameError = document.getElementById('usernameError'); // Get username error span element by ID
const emailError = document.getElementById('emailError'); // Get email error span element by ID
const passwordError = document.getElementById('passwordError'); // Get password error span element by ID
const confirmPasswordError = document.getElementById('confirmPasswordError'); // Get confirm password error span element by ID
const phoneError = document.getElementById('phoneError'); // Get phone error span element by ID
const branchError = document.getElementById('branchError'); // Get branch error span element by ID
const languageError = document.getElementById('languageError'); // Get language error span element by ID
const talukaError = document.getElementById('talukaError'); // Get taluka error span element by ID
const dobError = document.getElementById('dobError'); // Get DOB error span element by ID
const photoError = document.getElementById('photoError'); // Get photo error span element by ID
const hobbiesError = document.getElementById('hobbiesError'); // Get hobbies error span element by ID

// Validation functions
function validateName() {
    const name = fnameInput.value.trim(); // Gets value and trim ie removes spaces at ends
    clearError(fnameInput, fnameError); // Calls clearError to clear any previous error msgs
    if (name === '') { // Checks if name input is empty
        showError(fnameInput, fnameError, 'Name is required'); // Shows name is required msg
        return false; // Returns False
    }
    if (name.length < 2) { // Checks if char in name are less than 2
        showError(fnameInput, fnameError, 'Name must be at least 2 characters'); // Shows msg name must be at least 2 char
        return false; // Returns False
    }
    if (name.length > 50) { // Checks if char in name are greater than 50
        showError(fnameInput, fnameError, 'Name must not exceed 50 characters'); // Shows msg name must not exceed 50 char
        return false; // Returns False
    }
    // Check for valid characters (letters and spaces)
    const nameRegex = /^[a-zA-Z\s']+$/; // JS Regex to allow only letters, spaces and apostrophes 
    if (!nameRegex.test(name)) { // Tests name input against regex pattern
        showError(fnameInput, fnameError, 'Name can only contain letters and spaces'); // if not match show error msg
        return false; // Returns False
    }
    return true; // Return True
}

function validateUsername() {
    const username = usernameInput.value.trim(); // Gets value and trim ie removes spaces at ends
    clearError(usernameInput, usernameError); // Calls clearError to clear any previous error msgs
    if (username === '') { // Checks if username input is empty
        showError(usernameInput, usernameError, 'Username is required');
        return false; // Returns False
    }
    const usernameRegex = /^[a-zA-Z0-9_]+$/; // JS Regex to allow only letters (small & capital), numbers, underscore /^ indicates start and $/ indicates end of regex
    if (!usernameRegex.test(username)) { // Tests name input against regex pattern
        showError(usernameInput, usernameError, 'Username can only contain letters, numbers, and underscores'); // if not, displays msg
        return false; // Returns False
    }
    if (username.length < 3) { // Checks if char in username are less than 3
        showError(usernameInput, usernameError, 'Username must be at least 3 characters'); // if yes, display error msg
        return false; // Returns False
    }
    if (username.length > 20) { // Checks if char in username are greater than 20
        showError(usernameInput, usernameError, 'Username must not exceed 20 characters'); // if yes, display error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateEmail() {
    const email = emailInput.value.trim(); // Gets value of email and trim ie removes spaces at ends
    clearError(emailInput, emailError); // Calls clearError to clear any previous error msgs
    if (email === '') { // Checks if email input is empty
        showError(emailInput, emailError, 'Email is required'); 
        return false; // Returns False
    }
    //Email Regex pattern matches emails eg - "text@domain.extension" 
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    // Symbols Explained
    // /^ indicates the start of the regex
    // [^\s@]+ check for one or more char except space or @ at start
    // @ checks for '@' from eg. @gmail.com
    // [^\s@]+ checks for one or more char except space or @ after '@'
    // \. checks for literal dot '.' from .com
    // [^\s@]+ checks for one or more char except space or @ after '.'
    // $/ indicates end of the sentence
    if (!emailRegex.test(email)) { // Tests name input against regex pattern
        showError(emailInput, emailError, 'Please enter a valid email address'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validatePassword() {
    const password = passwordInput.value; // Gets value and trim ie removes spaces at ends
    clearError(passwordInput, passwordError); // Calls clearError to clear any previous error msg
    
    if (password === '') { // Checks if password input is empty
        showError(passwordInput, passwordError, 'Password is required'); // Displays error msg
        return false; // Returns False
    }
    // Check for at least one number
    if (!/\d/.test(password)) { // \d checks for digit from 0-9
        showError(passwordInput, passwordError, 'Password must contain at least one number'); // Displays error msg
        return false; // Returns False
    }
    // Check for at least one letter
    if (!/[a-zA-Z]/.test(password)) { // Checks for at least one letter (small or capital)
        showError(passwordInput, passwordError, 'Password must contain at least one letter'); // Displays error msg
        return false; // Returns False
    }
    if (password.length < 6) { // Checks if password length is less than 6
        showError(passwordInput, passwordError, 'Password must be at least 6 characters'); // Displays error msg
        return false; // Returns False
    }
    if (password.length > 16) { // Checks if password length is greater than 16
        showError(passwordInput, passwordError, 'Password must not exceed 16 characters'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateConfirmPassword() {
    const password = passwordInput.value; // Gets value of password input
    const confirmPassword = confirmPasswordInput.value; // Gets value of password confirmation input
    clearError(confirmPasswordInput, confirmPasswordError); // Clears previous error msg
    
    if (confirmPassword === '') { // Checks if confirm password input is empty
        showError(confirmPasswordInput, confirmPasswordError, 'Please confirm your password');
        return false; // Returns False
    }
    if (password !== confirmPassword) { // Checks if password and confirm password do not match
        showError(confirmPasswordInput, confirmPasswordError, 'Passwords do not match');
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validatePhone() {
    const phone = phoneInput.value.trim(); // Gets value and trim ie removes spaces at ends
    clearError(phoneInput, phoneError); // Calls clearError to clear any previous error msg
    if (phone === '') { // Checks if phone input is empty
        showError(phoneInput, phoneError, 'Phone number is required');
        return false; // Returns False
    }
    // Phone regex pattern (10 digits)
    const phoneRegex = /^\d{10}$/; // ^ indicates start, \d{10} checks for exactly 10 digits, $ indicates end
    if (!phoneRegex.test(phone)) { // Tests phone input against regex pattern
        showError(phoneInput, phoneError, 'Please enter a valid 10-digit phone number');
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateBranch() {
    const branch = document.querySelector('input[name="branch"]:checked'); // Gets checked radio input
    clearError(null, branchError); // Calls clearError to clear any previous error msg
    if (!branch) { // Checks if no branch is selected
        showError(null, branchError, 'Please select a branch'); //  Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateLanguages() {
    const languages = document.querySelectorAll('input[type="checkbox"]:checked'); // Gets all checked checkboxes
    clearError(null, languageError); // Calls clearError to clear any previous error msg
    if (languages.length === 0) { // Checks if no languages are selected
        showError(null, languageError, 'Please select at least one language'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validatetaluka() {
    const taluka = talukaSelect.value;
    clearError(talukaSelect, talukaError); // Calls clearError to clear any previous error msg
    if (taluka === '') { // Checks if no taluka is selected
        showError(talukaSelect, talukaError, 'Please select a taluka'); //  Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateDOB() {
    const dob = dobInput.value; // Gets value of dob input
    clearError(dobInput, dobError); // Calls clearError to clear any previous error msg
    if (dob === '') { // Checks if dob input is empty
        showError(dobInput, dobError, 'Date of birth is required'); // Displays error msg
        return false; // Returns False
    }
    
    // Check if user is at least 13 years old
    const today = new Date(); // Gets today's date
    const birthDate = new Date(dob); // Converts dob string to Date object
    const age = today.getFullYear() - birthDate.getFullYear(); // Calculates age by subtracting birth year from current year
    const monthDiff = today.getMonth() - birthDate.getMonth(); // Calculates month difference between current month and birth month
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) { // If current month is before birth month or it's the birth month but current day is before birth day
        age--; // Decreases age by 1, as birthday hasn't occurred yet this year
    }
    if (age < 13) { // Checks if age is less than 13
        showError(dobInput, dobError, 'You must be at least 13 years old'); // Displays error msg
        return false; // Returns False
    }
    if (age > 120) { // Checks if age is greater than 120
        showError(dobInput, dobError, 'Please enter a valid date of birth'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validatePhoto() {
    const photo = photoInput.files[0]; // Gets the selected file
    clearError(photoInput, photoError); // Calls clearError to clear any previous error msg
    if (!photo) { // Checks if no photo is selected
        // Photo is optional, so return true if not provided
        return true;
    }
    // Check file size (max 5MB)
    const maxSize = 5 * 1024 * 1024; // 5MB in bytes
    if (photo.size > maxSize) { // Checks if photo size is greater than max size
        showError(photoInput, photoError, 'Image size must not exceed 5MB'); // Displays error msg
        return false; // Returns False
    }
    // Check file type
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif']; // Allowed image types
    if (!allowedTypes.includes(photo.type)) { // Checks if photo type is not in allowed types
        showError(photoInput, photoError, 'Only JPEG, PNG, and GIF images are allowed'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function validateHobbies() {
    const hobbies = hobbiesInput.value.trim(); // Gets value and trim ie removes spaces at ends
    clearError(hobbiesInput, hobbiesError); // Calls clearError to clear any previous error msg
    if (hobbies === '') { // Checks if hobbies input is empty
        showError(hobbiesInput, hobbiesError, 'Please tell us about your hobbies'); // Displays error msg
        return false; // Returns False
    }
    if (hobbies.length < 10) { // Checks if char in hobbies are less than 10
        showError(hobbiesInput, hobbiesError, 'Please provide at least 10 characters'); // Displays error msg
        return false; // Returns False
    }
    if (hobbies.length > 500) { // Checks if char in hobbies are greater than 500
        showError(hobbiesInput, hobbiesError, 'Hobbies must not exceed 500 characters'); // Displays error msg
        return false; // Returns False
    }
    return true; // Returns True, if no errors found in above if statements
}

function showError(inputElement, errorElement, message) { // Function to show error message
    if (inputElement) { // Checks if inputElement is not null
        inputElement.classList.add('error'); // Adds error class to input element to change border color to red
    }
    errorElement.textContent = message; // Sets the error message text
    errorElement.classList.add('show'); // Adds show class to error element to display the message (previously set to none)
}

function clearError(inputElement, errorElement) { // Function to clear error message
    if (inputElement) { // Checks if inputElement is not null
        inputElement.classList.remove('error'); // Removes error class from input element to reset border color
    }
    errorElement.classList.remove('show'); // Removes show class from error element to hide the message
    errorElement.textContent = ''; // Clears the error message text content
}

// Real-time validation on input
fnameInput.addEventListener('input', function() { // Event listener for input event on name input
    if (fnameInput.value.trim() !== '') { // Checks if name input is not empty
        validateName(); // Calls validateName function
    } else {
        clearError(fnameInput, fnameError); // Clears error if input is empty
    }
});

usernameInput.addEventListener('input', function() { // Event listener for input event on username input
    if (usernameInput.value.trim() !== '') { // Checks if username input is not empty
        validateUsername(); //  Calls validateUsername function
    } else { 
        clearError(usernameInput, usernameError); // Clears error if input is empty 
    }
});

emailInput.addEventListener('input', function() { // Event listener for input event on email input
    if (emailInput.value.trim() !== '') { // Checks if email input is not empty
        validateEmail(); // Calls validateEmail function
    } else {
        clearError(emailInput, emailError); // Clears error if input is empty
    }
});

passwordInput.addEventListener('input', function() { // Event listener for input event on password input
    if (passwordInput.value !== '') { // Checks if password input is not empty
        validatePassword(); // Calls validatePassword function
        // Also revalidate confirm password if it has a value
        if (confirmPasswordInput.value !== '') { // Checks if confirm password input is not empty
            validateConfirmPassword(); // Calls validateConfirmPassword function
        }
    } else {
        clearError(passwordInput, passwordError); // Clears error if input is empty
    }
});

confirmPasswordInput.addEventListener('input', function() { //  Event listener for input event on confirm password input
    if (confirmPasswordInput.value !== '') { // Checks if confirm password input is not empty
        validateConfirmPassword(); // Calls validateConfirmPassword function
    } else {
        clearError(confirmPasswordInput, confirmPasswordError); // Clears error if input is empty
    }
});

phoneInput.addEventListener('input', function() { // Event listener for input event on phone input
    if (phoneInput.value.trim() !== '') { // Checks if phone input is not empty
        validatePhone(); // Calls validatePhone function
    } else {
        clearError(phoneInput, phoneError); // Clears error if input is empty
    }
});

talukaSelect.addEventListener('change', function() { // Event listener for change event on taluka select
    if (talukaSelect.value !== '') { // Checks if taluka select is not empty
        validatetaluka(); // Calls validatetaluka function
    } else {
        clearError(talukaSelect, talukaError); // Clears error if input is empty
    }
});

dobInput.addEventListener('change', function() { // Event listener for change event on dob input
    if (dobInput.value !== '') { // Checks if dob input is not empty
        validateDOB(); // Calls validateDOB function
    } else {
        clearError(dobInput, dobError); // Clears error if input is empty
    }
});

photoInput.addEventListener('change', function() { // Event listener for change event on photo input
    validatePhoto(); // Always validate photo on change, as it's optional
});

hobbiesInput.addEventListener('input', function() { // Event listener for input event on hobbies textarea
    if (hobbiesInput.value.trim() !== '') { // Checks if hobbies input is not empty
        validateHobbies(); // Calls validateHobbies function
    } else {
        clearError(hobbiesInput, hobbiesError); // Clears error if input is empty
    }
});

// Form submission validation
registrationForm.addEventListener('submit', function(e) { // Event listener for submit event on registration form
    e.preventDefault(); // Prevents default form submission behavior (stops page reload)
    // Perform all validations returned values stored in constants
    const isNameValid = validateName(); // Validate name and store result
    const isUsernameValid = validateUsername(); // Validate username and store result
    const isEmailValid = validateEmail(); // Validate email and store result
    const isPasswordValid = validatePassword(); // Validate password and store result
    const isConfirmPasswordValid = validateConfirmPassword(); // Validate confirm password and store result
    const isPhoneValid = validatePhone(); // Validate phone and store result
    const isBranchValid = validateBranch(); // Validate branch and store result
    const isLanguagesValid = validateLanguages(); // Validate languages and store result
    const istalukaValid = validatetaluka(); // Validate taluka and store result
    const isDOBValid = validateDOB(); // Validate date of birth and store result
    const isPhotoValid = validatePhoto(); // Validate photo and store result
    const isHobbiesValid = validateHobbies(); // Validate hobbies and store result

    // If all validations are true, show success message
    if (isNameValid && isUsernameValid && isEmailValid && isPasswordValid && 
        isConfirmPasswordValid && isPhoneValid && isBranchValid && isLanguagesValid && 
        istalukaValid && isDOBValid && isPhotoValid && isHobbiesValid) { // Check if all validations passed
        alert('Registration successful! ✓\nWelcome, ' + fnameInput.value.trim() + '!'); // Show success alert
    } else { // If any validation is false, show a general error alert
        alert('Please fix the errors in the form before submitting.'); // Show error alert
    }
});

// Clear error on focus for all elements
fnameInput.addEventListener('focus', function() { // Event listener for focus event on name input
    clearError(fnameInput, fnameError); // Clear error when name field is focused
});
usernameInput.addEventListener('focus', function() { // Event listener for focus event on username input
    clearError(usernameInput, usernameError); // Clear error when username field is focused
});
emailInput.addEventListener('focus', function() { // Event listener for focus event on email input
    clearError(emailInput, emailError); // Clear error when email field is focused
});
passwordInput.addEventListener('focus', function() { // Event listener for focus event on password input
    clearError(passwordInput, passwordError); // Clear error when password field is focused
});
confirmPasswordInput.addEventListener('focus', function() { // Event listener for focus event on confirm password input
    clearError(confirmPasswordInput, confirmPasswordError); // Clear error when confirm password field is focused
});
phoneInput.addEventListener('focus', function() { // Event listener for focus event on phone input
    clearError(phoneInput, phoneError); // Clear error when phone field is focused
});
talukaSelect.addEventListener('focus', function() { // Event listener for focus event on taluka select
    clearError(talukaSelect, talukaError); // Clear error when taluka select is focused
});
dobInput.addEventListener('focus', function() { // Event listener for focus event on DOB input
    clearError(dobInput, dobError); // Clear error when DOB field is focused
});
photoInput.addEventListener('focus', function() { // Event listener for focus event on photo input
    clearError(photoInput, photoError); // Clear error when photo field is focused
});
hobbiesInput.addEventListener('focus', function() { // Event listener for focus event on hobbies textarea
    clearError(hobbiesInput, hobbiesError); // Clear error when hobbies field is focused
});
</script>
</body>
</html>