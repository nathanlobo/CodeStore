<!DOCTYPE html>
<html>
<head>
    <title>Registration Form Validation</title>
    <style>
		body {
			background-image: url("./bg.jpg");
			background-repeat: no-repeat;
            transform: rotate(-90);
			background-size: cover;
			background-position: center;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 40px auto;
            background-color: #fff;
            padding: 20px 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        h2, h3 {
            color: #333;
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"],
        input[type="password"],
        input[type="email"],
        input[type="date"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 4px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        input[type="radio"],
        input[type="checkbox"] {
            margin-right: 8px;
        }
        .signup-option {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        .signup-option a {
            color: #383838;
        }
        .signup-option a:hover {
            text-decoration: underline;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .btn-group {
            display: flex;
            justify-content: space-between;
        }
        input[type="submit"],
        input[type="reset"],
        input[type="button"] {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #000;
            color: white;
            font-size: 1em;
        }
        input[type="reset"] {
            background-color: #696969;
        }
        input[type="button"] {
            background-color: #383838;
        }
        input[type="submit"]:hover,
        input[type="reset"]:hover,
        input[type="button"]:hover {
            opacity: 0.9;
        }
        .error-message {
            color: #dc3545;
            font-size: 0.85rem;
            margin-top: -4px;
            margin-bottom: 8px;
            display: none;
        }
        .error-message.show {
            display: block;
        }
        input.error,
        select.error,
        textarea.error {
            border-color: #dc3545;
        }
        .success-message {
            color: #28a745;
            font-size: 0.85rem;
            margin-top: -4px;
            margin-bottom: 8px;
            display: none;
        }
        .success-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 style="text-align:center">Register Your Account</h2>
        <div class="signup-option">
            Already have an account? <a href="./expt7-login.html">Login</a>
        </div>
        <form id="registrationForm">
            <label>Name</label>
            <input type="text" id="fname" placeholder="Enter your Name" autofocus autocomplete="name">
            <span class="error-message" id="fnameError"></span>
            
			<label>Username</label>
            <input type="text" id="username" name="username" placeholder="Choose your username">
            <span class="error-message" id="usernameError"></span>
            
            <label>Email</label>
            <input type="email" id="email" name="email" size="16" placeholder="Enter your Email">
            <span class="error-message" id="emailError"></span>
            
            <label>Password</label>
            <input type="password" id="password" name="password" maxlength="16" placeholder="Enter Password">
            <span class="error-message" id="passwordError"></span>
            
            <label>Confirm Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword" maxlength="16" placeholder="Enter Password Again">
            <span class="error-message" id="confirmPasswordError"></span>
            
            <label>Phone Number</label>
            <input type="tel" id="phone" placeholder="Enter Phone number">
            <span class="error-message" id="phoneError"></span>
            
            <h3>Please Select your Branch</h3>
            <div>
                <input type="radio" id="ece" name="branch" value="Electronics" style="accent-color:black">Electronics & Computer Engg<br>
                <input type="radio" id="mech" name="branch" value="Mechanical" style="accent-color:black">Mechanical & Automation Engg<br>
                <input type="radio" id="comp" name="branch" value="Computer" style="accent-color:black">Computer Engg
            </div>
            <span class="error-message" id="branchError"></span>
            
            <h3>Languages Known</h3>
            <div>
                <input type="checkbox" id="e" name="eng" value="english" style="accent-color:black">English<br>
                <input type="checkbox" id="m" name="mar" value="marathi" style="accent-color:black">Marathi<br>
                <input type="checkbox" id="k" name="kon" value="konkani" style="accent-color:black">Konkani
            </div>
            <span class="error-message" id="languageError"></span>
            
            <label>Choose your Taluka</label>
            <select size="1" id="country" name="country">
                <option value="">Select a Taluka</option>
                <option value="Bardez">Bardez</option>
                <option value="Bicholim">Bicholim</option>
                <option value="Canacona">Canacona</option>
                <option value="Dharbandora">Dharbandora</option>
                <option value="Mormugao">Mormugao</option>
                <option value="Pernem">Pernem</option>
                <option value="Ponda">Ponda</option>
                <option value="Quepem">Quepem</option>
                <option value="Salcete">Salcete</option>
                <option value="Sanguem">Sanguem</option>
                <option value="Sattari">Sattari</option>
                <option value="Tiswadi">Tiswadi</option>                
            </select>
            <span class="error-message" id="countryError"></span>
            
            <label>Enter your Date of Birth</label>
            <input type="date" id="dob" name="DateOfBirth">
            <span class="error-message" id="dobError"></span>
            
			<label for="myfile">Add a Profile Pic</label>
			<input type="file" id="photo" name="photo" accept="image/*">
			<span class="error-message" id="photoError"></span>
            
            <label>Select a Theme Color</label>
            <input type="color" id="themeColor" name="themeColor">
            
            <h3>What are your hobbies?</h3>
            <textarea rows="5" id="hobbies" placeholder="Enter your hobbies"></textarea>
            <span class="error-message" id="hobbiesError"></span>
            
			<div class="btn-group">
				<input type="submit" id="favcolor" name="favcolor" value="Submit">
            </div>
        </form>
    </div>

    <script>
        // Get form and input elements
        const registrationForm = document.getElementById('registrationForm');
        const fnameInput = document.getElementById('fname');
        const usernameInput = document.getElementById('username');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const phoneInput = document.getElementById('phone');
        const countrySelect = document.getElementById('country');
        const dobInput = document.getElementById('dob');
        const photoInput = document.getElementById('photo');
        const hobbiesInput = document.getElementById('hobbies');

        // Get error message elements
        const fnameError = document.getElementById('fnameError');
        const usernameError = document.getElementById('usernameError');
        const emailError = document.getElementById('emailError');
        const passwordError = document.getElementById('passwordError');
        const confirmPasswordError = document.getElementById('confirmPasswordError');
        const phoneError = document.getElementById('phoneError');
        const branchError = document.getElementById('branchError');
        const languageError = document.getElementById('languageError');
        const countryError = document.getElementById('countryError');
        const dobError = document.getElementById('dobError');
        const photoError = document.getElementById('photoError');
        const hobbiesError = document.getElementById('hobbiesError');

        // Validation functions
        function validateName() {
            const name = fnameInput.value.trim();
            clearError(fnameInput, fnameError);
            
            if (name === '') {
                showError(fnameInput, fnameError, 'Name is required');
                return false;
            }
            if (name.length < 2) {
                showError(fnameInput, fnameError, 'Name must be at least 2 characters');
                return false;
            }
            if (name.length > 50) {
                showError(fnameInput, fnameError, 'Name must not exceed 50 characters');
                return false;
            }
            // Check for valid characters (letters and spaces)
            const nameRegex = /^[a-zA-Z\s]+$/;
            if (!nameRegex.test(name)) {
                showError(fnameInput, fnameError, 'Name can only contain letters and spaces');
                return false;
            }
            return true;
        }

        function validateUsername() {
            const username = usernameInput.value.trim();
            clearError(usernameInput, usernameError);
            
            if (username === '') {
                showError(usernameInput, usernameError, 'Username is required');
                return false;
            }
            const usernameRegex = /^[a-zA-Z0-9_]+$/;
            if (!usernameRegex.test(username)) {
                showError(usernameInput, usernameError, 'Username can only contain letters, numbers, and underscores');
                return false;
            }
            if (username.length < 3) {
                showError(usernameInput, usernameError, 'Username must be at least 3 characters');
                return false;
            }
            if (username.length > 20) {
                showError(usernameInput, usernameError, 'Username must not exceed 20 characters');
                return false;
            }
            return true;
        }

        function validateEmail() {
            const email = emailInput.value.trim();
            clearError(emailInput, emailError);
            
            if (email === '') {
                showError(emailInput, emailError, 'Email is required');
                return false;
            }
            // Email regex pattern: matches format "text@domain.extension" where none contain spaces or @ symbols
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // [^\s@]+ = one or more chars that aren't space/@ | @ = literal @ | \. = literal dot
            if (!emailRegex.test(email)) {
                showError(emailInput, emailError, 'Please enter a valid email address');
                return false;
            }
            return true;
        }

        function validatePassword() {
            const password = passwordInput.value;
            clearError(passwordInput, passwordError);
            
            if (password === '') {
                showError(passwordInput, passwordError, 'Password is required');
                return false;
            }
            // Check for at least one number
            if (!/\d/.test(password)) {
                showError(passwordInput, passwordError, 'Password must contain at least one number');
                return false;
            }
            // Check for at least one letter
            if (!/[a-zA-Z]/.test(password)) {
                showError(passwordInput, passwordError, 'Password must contain at least one letter');
                return false;
            }
            if (password.length < 6) {
                showError(passwordInput, passwordError, 'Password must be at least 6 characters');
                return false;
            }
            if (password.length > 16) {
                showError(passwordInput, passwordError, 'Password must not exceed 16 characters');
                return false;
            }
            return true;
        }

        function validateConfirmPassword() {
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            clearError(confirmPasswordInput, confirmPasswordError);
            
            if (confirmPassword === '') {
                showError(confirmPasswordInput, confirmPasswordError, 'Please confirm your password');
                return false;
            }
            if (password !== confirmPassword) {
                showError(confirmPasswordInput, confirmPasswordError, 'Passwords do not match');
                return false;
            }
            return true;
        }

        function validatePhone() {
            const phone = phoneInput.value.trim();
            clearError(phoneInput, phoneError);
            
            if (phone === '') {
                showError(phoneInput, phoneError, 'Phone number is required');
                return false;
            }
            // Phone regex pattern (10 digits)
            const phoneRegex = /^\d{10}$/;
            if (!phoneRegex.test(phone)) {
                showError(phoneInput, phoneError, 'Please enter a valid 10-digit phone number');
                return false;
            }
            return true;
        }

        function validateBranch() {
            const branch = document.querySelector('input[name="branch"]:checked');
            clearError(null, branchError);
            
            if (!branch) {
                showError(null, branchError, 'Please select a branch');
                return false;
            }
            return true;
        }

        function validateLanguages() {
            const languages = document.querySelectorAll('input[type="checkbox"]:checked');
            clearError(null, languageError);
            
            if (languages.length === 0) {
                showError(null, languageError, 'Please select at least one language');
                return false;
            }
            return true;
        }

        function validateCountry() {
            const country = countrySelect.value;
            clearError(countrySelect, countryError);
            
            if (country === '') {
                showError(countrySelect, countryError, 'Please select a country');
                return false;
            }
            return true;
        }

        function validateDOB() {
            const dob = dobInput.value;
            clearError(dobInput, dobError);
            
            if (dob === '') {
                showError(dobInput, dobError, 'Date of birth is required');
                return false;
            }
            
            // Check if user is at least 13 years old
            const today = new Date();
            const birthDate = new Date(dob);
            const age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            if (age < 13) {
                showError(dobInput, dobError, 'You must be at least 13 years old');
                return false;
            }
            
            if (age > 120) {
                showError(dobInput, dobError, 'Please enter a valid date of birth');
                return false;
            }
            
            return true;
        }

        function validatePhoto() {
            const photo = photoInput.files[0];
            clearError(photoInput, photoError);
            
            if (!photo) {
                // Photo is optional, so return true if not provided
                return true;
            }
            
            // Check file size (max 5MB)
            const maxSize = 5 * 1024 * 1024; // 5MB in bytes
            if (photo.size > maxSize) {
                showError(photoInput, photoError, 'Image size must not exceed 5MB');
                return false;
            }
            
            // Check file type
            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
            if (!allowedTypes.includes(photo.type)) {
                showError(photoInput, photoError, 'Only JPEG, PNG, and GIF images are allowed');
                return false;
            }
            
            return true;
        }

        function validateHobbies() {
            const hobbies = hobbiesInput.value.trim();
            clearError(hobbiesInput, hobbiesError);
            
            if (hobbies === '') {
                showError(hobbiesInput, hobbiesError, 'Please tell us about your hobbies');
                return false;
            }
            if (hobbies.length < 10) {
                showError(hobbiesInput, hobbiesError, 'Please provide at least 10 characters');
                return false;
            }
            if (hobbies.length > 500) {
                showError(hobbiesInput, hobbiesError, 'Hobbies must not exceed 500 characters');
                return false;
            }
            return true;
        }

        function showError(inputElement, errorElement, message) {
            if (inputElement) {
                inputElement.classList.add('error');
            }
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        function clearError(inputElement, errorElement) {
            if (inputElement) {
                inputElement.classList.remove('error');
            }
            errorElement.classList.remove('show');
            errorElement.textContent = '';
        }

        // Real-time validation on input
        fnameInput.addEventListener('input', function() {
            if (fnameInput.value.trim() !== '') {
                validateName();
            } else {
                clearError(fnameInput, fnameError);
            }
        });

        usernameInput.addEventListener('input', function() {
            if (usernameInput.value.trim() !== '') {
                validateUsername();
            } else {
                clearError(usernameInput, usernameError);
            }
        });

        emailInput.addEventListener('input', function() {
            if (emailInput.value.trim() !== '') {
                validateEmail();
            } else {
                clearError(emailInput, emailError);
            }
        });

        passwordInput.addEventListener('input', function() {
            if (passwordInput.value !== '') {
                validatePassword();
                // Also revalidate confirm password if it has a value
                if (confirmPasswordInput.value !== '') {
                    validateConfirmPassword();
                }
            } else {
                clearError(passwordInput, passwordError);
            }
        });

        confirmPasswordInput.addEventListener('input', function() {
            if (confirmPasswordInput.value !== '') {
                validateConfirmPassword();
            } else {
                clearError(confirmPasswordInput, confirmPasswordError);
            }
        });

        phoneInput.addEventListener('input', function() {
            if (phoneInput.value.trim() !== '') {
                validatePhone();
            } else {
                clearError(phoneInput, phoneError);
            }
        });

        countrySelect.addEventListener('change', function() {
            if (countrySelect.value !== '') {
                validateCountry();
            } else {
                clearError(countrySelect, countryError);
            }
        });

        dobInput.addEventListener('change', function() {
            if (dobInput.value !== '') {
                validateDOB();
            } else {
                clearError(dobInput, dobError);
            }
        });

        photoInput.addEventListener('change', function() {
            validatePhoto();
        });

        hobbiesInput.addEventListener('input', function() {
            if (hobbiesInput.value.trim() !== '') {
                validateHobbies();
            } else {
                clearError(hobbiesInput, hobbiesError);
            }
        });

        // Form submission validation
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const isNameValid = validateName();
            const isUsernameValid = validateUsername();
            const isEmailValid = validateEmail();
            const isPasswordValid = validatePassword();
            const isConfirmPasswordValid = validateConfirmPassword();
            const isPhoneValid = validatePhone();
            const isBranchValid = validateBranch();
            const isLanguagesValid = validateLanguages();
            const isCountryValid = validateCountry();
            const isDOBValid = validateDOB();
            const isPhotoValid = validatePhoto();
            const isHobbiesValid = validateHobbies();

            // If all validations pass, show success message
            if (isNameValid && isUsernameValid && isEmailValid && isPasswordValid && 
                isConfirmPasswordValid && isPhoneValid && isBranchValid && isLanguagesValid && 
                isCountryValid && isDOBValid && isPhotoValid && isHobbiesValid) {
                alert('Registration successful! ✓\nWelcome, ' + fnameInput.value.trim() + '!');
            } else {
                alert('Please fix the errors in the form before submitting.');
            }
        });

        // Clear error on focus
        fnameInput.addEventListener('focus', function() {
            clearError(fnameInput, fnameError);
        });

        usernameInput.addEventListener('focus', function() {
            clearError(usernameInput, usernameError);
        });

        emailInput.addEventListener('focus', function() {
            clearError(emailInput, emailError);
        });

        passwordInput.addEventListener('focus', function() {
            clearError(passwordInput, passwordError);
        });

        confirmPasswordInput.addEventListener('focus', function() {
            clearError(confirmPasswordInput, confirmPasswordError);
        });

        phoneInput.addEventListener('focus', function() {
            clearError(phoneInput, phoneError);
        });

        countrySelect.addEventListener('focus', function() {
            clearError(countrySelect, countryError);
        });

        dobInput.addEventListener('focus', function() {
            clearError(dobInput, dobError);
        });

        photoInput.addEventListener('focus', function() {
            clearError(photoInput, photoError);
        });

        hobbiesInput.addEventListener('focus', function() {
            clearError(hobbiesInput, hobbiesError);
        });
    </script>
</body>
</html>