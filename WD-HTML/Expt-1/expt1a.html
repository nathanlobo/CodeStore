<!DOCTYPE html>
<html>
<head>
<title>Expt 1a - HTML Basics</title>
<!-- html2canvas + screenshot message listener (paste before </body>) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
  // Configure allowed parent origins (exact origin: scheme + host + port)
  const ALLOWED_PARENTS = [
    'http://127.0.0.1:5500',
    'http://127.0.0.1:5500/output.html',
    'http://localhost:5500',
    'https://nathanlobo.github.io'
  ];

  // Listen for screenshot requests from the parent
  window.addEventListener('message', async (e) => {
    // Only accept requests from configured parent origins
    if (!ALLOWED_PARENTS.includes(e.origin)) return;

    const msg = e.data || {};
    if (msg.type !== 'request-iframe-screenshot') return;

    // Parent may request a backgroundColor (e.g. '#ffffff' or '#000000')
    const backgroundColor = (typeof msg.backgroundColor !== 'undefined') ? msg.backgroundColor : null;

    try {
      // Wait briefly if html2canvas hasn't finished loading
      if (!window.html2canvas) {
        await new Promise(r => setTimeout(r, 250));
        if (!window.html2canvas) {
          window.parent.postMessage({ type: 'iframe-screenshot-response', dataUrl: null, error: 'html2canvas-not-loaded' }, e.origin);
          return;
        }
      }

      // Capture the full document (documentElement) for best results
      const target = document.documentElement || document.body;
      const canvas = await html2canvas(target, {
        backgroundColor: backgroundColor, // pass null to keep transparency
        scale: 2,
        useCORS: true
      });

      const dataUrl = canvas.toDataURL('image/png');

      // Send the dataURL back to the requesting parent origin only
      window.parent.postMessage({ type: 'iframe-screenshot-response', dataUrl }, e.origin);
    } catch (err) {
      window.parent.postMessage({ type: 'iframe-screenshot-response', dataUrl: null, error: err && err.message }, e.origin);
    }
  }, false);
</script>
</head>
<body>
<p>My Name is Nathan Lobo, I like to listen to music.</p>
<h3>Hobbies</h3>
<ol>
    <li>Listening to music.</li>
    <li>Coding.</li>
    <li>Repairing</li>
</ol>
<h3>Skills</h3>
<ul>
    <li>Electronics Repair.</li>
    <li>Python, Arduino Programming.</li>
    <li>Playing Guitar.</li>
</ul>
<a href="https://www.youtube.com/ElectroProjects">My YouTube Channel</a>
<br><br>
<img src="EP.jpg" alt="Electro Projects Logo" width="200" height="200">
<img src="qr-code.png" alt="QR Code to my Youtube" width="200" height="200">
<br>
<dl>
    <dt>What is Electro Projects about?</dt>
    <dd>In Electro Projects, the viewer will get all the information Electronic circuits whether Breadboard, Soldered or PCB circuits etc.</dd>
    <dd>Other than that you may also get more information about Do it yourself (DIY) projects and experiments</dd>
<dl>
<br>
<table style="text-align: center;" border="3">
    <tr>
        <th>Channel</th>
        <th style="padding: 5px;">Subs</th>
    </tr>
    <tr>
        <td style="padding: 5px;">Electro Projects</td>
        <td>458</td>
    </tr>
</table>
<br>
<form>
    <label for="Name">Name:</label>
    <input type="text" id="name"><br>
    <label for="msg">Message</label><br>
    <textarea id="msg"></textarea><br>
    <button id="submit">Submit</button>
</form>
<p>5&lt;10 and 10&gt;5</p>
<p>Nathan Lobo &copy; 2025</p>
<p>This&nbsp;is&nbsp;a&nbsp;spaced&nbsp;text</p>
<audio controls>
    <source src="see_you_again.mp3" type="audio/mpeg">
</audio>
<br>
<video width="320" height="240" controls>
    <source src="video.mp4" type="video/mp4">
</video>
</body>
</html>